{"version":3,"sources":["ShareButton.js"],"names":["cc","Class","extends","Component","properties","onLoad","data","start","setShareData","shareMiniApp","tywx","IsWechatPlatform","window","wx","showShareMenu","withShareTicket","msg","ShareInterface","getRandomOnShareAppMessageInfo","console","log","JSON","stringify","share","title","imageUrl","sharePointId","shareSchemeId","res","shareTickets","undefined","length","postMessage","method","MAIN_MENU_NUM","shareTicket"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY,EAHP;;AAOL;;AAEAC,UATK,oBASK;AACN,aAAKC,IAAL,GAAY,EAAZ;AACH,KAXI;AAaLC,SAbK,mBAaI,CAER,CAfI;;;AAiBLC,kBAAa,wBAAU;AACnB,aAAKF,IAAL,GAAYA,IAAZ;AACH,KAnBI;;AAqBLG,kBAAa,wBAAU;AACnB,YAAGC,KAAKC,gBAAL,EAAH,EAA2B;AACvBC,mBAAOC,EAAP,CAAUC,aAAV,CAAwB,EAACC,iBAAiB,IAAlB,EAAxB;AACA,gBAAIC,MAAMN,KAAKO,cAAL,CAAoBC,8BAApB,EAAV;AACAC,oBAAQC,GAAR,CAAY,WAASC,KAAKC,SAAL,CAAeN,GAAf,CAArB;AACA,gBAAGA,GAAH,EAAO;AACHN,qBAAKO,cAAL,CAAoBM,KAApB,CACIP,IAAIQ,KADR,EAEIR,IAAIS,QAFR,EAGIT,IAAIU,YAHR,EAIIV,IAAIW,aAJR,EAKI,UAACC,GAAD,EAAS;AACLT,4BAAQC,GAAR,CAAY,aAAWC,KAAKC,SAAL,CAAeM,GAAf,CAAvB;AACA,wBAAIA,IAAIC,YAAJ,IAAoBC,SAApB,IAAiCF,IAAIC,YAAJ,CAAiBE,MAAjB,GAA0B,CAA/D,EAAkE;AAC9DnB,+BAAOC,EAAP,CAAUmB,WAAV,CAAsB;AAClBC,oCAAQ,CADU;AAElBC,2CAAe,IAFG;AAGlBC,yCAAaP,IAAIC,YAAJ,CAAiB,CAAjB;AAHK,yBAAtB;AAKH;AACJ,iBAdL,EAcM,IAdN,EAeI,UAASvB,IAAT,EAAc;AACVa,4BAAQC,GAAR,CAAY,cAAYC,KAAKC,SAAL,CAAehB,IAAf,CAAxB;AACH,iBAjBL;AAmBJ;AACJ;AAEH;;AAED;AAnDK,CAAT","file":"ShareButton.js","sourceRoot":"../../../../../assets/Script/models","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n      \n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        this.data = {};\n    },\n\n    start () {\n\n    },\n\n    setShareData:function(){\n        this.data = data;\n    },\n\n    shareMiniApp:function(){\n        if(tywx.IsWechatPlatform()){\n            window.wx.showShareMenu({withShareTicket: true});\n            var msg = tywx.ShareInterface.getRandomOnShareAppMessageInfo();\n            console.log(\"msg = \"+JSON.stringify(msg));\n            if(msg){\n                tywx.ShareInterface.share(\n                    msg.title,\n                    msg.imageUrl,\n                    msg.sharePointId,\n                    msg.shareSchemeId,\n                    (res) => {\n                        console.log(\"分享成功后的数据\"+JSON.stringify(res));\n                        if (res.shareTickets != undefined && res.shareTickets.length > 0) {\n                            window.wx.postMessage({\n                                method: 2,\n                                MAIN_MENU_NUM: \"x1\",\n                                shareTicket: res.shareTickets[0]\n                            });\n                        }\n                    },null,\n                    function(data){\n                        console.log(\"分享成功后的数2据\"+JSON.stringify(data));\n                    }\n                );\n           }\n       }\n       \n    }\n\n    // update (dt) {},\n});\n"]}