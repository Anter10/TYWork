{"version":3,"sources":["ShareButton.js"],"names":["cc","Class","extends","Component","properties","onLoad","data","start","setShareData","setSuccessCall","successCall","successCallBack","setErrorCall","errorCall","errorCallBack","setShareGroupCall","sgroupCall","shareGroupCallBack","shareMiniApp","self","tywx","IsWechatPlatform","window","wx","showShareMenu","withShareTicket","msg","ShareInterface","getRandomOnShareAppMessageInfo","console","log","JSON","stringify","share","title","imageUrl","sharePointId","shareSchemeId","res","shareTickets","undefined","length"],"mappings":";;;;;;AAAC;;;;;;AAMDA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY,EAHP;;AAOH;;;;;;;;;;;AAWFC,UAlBK,oBAkBK;AACN,aAAKC,IAAL,GAAY,EAAZ;AACH,KApBI;;AAqBL;;;;;;;;;;;AAWAC,SAhCK,mBAgCI,CAER,CAlCI;;;AAoCL;;;;;;;;;;;AAWAC,kBAAa,sBAASF,IAAT,EAAc;AACvB,aAAKA,IAAL,GAAYA,IAAZ;AACH,KAjDI;;AAmDL;;;;;;;;;;;AAWAG,oBAAgB,wBAASC,WAAT,EAAqB;AACjC,aAAKC,eAAL,GAAuBD,WAAvB;AACH,KAhEI;;AAkEJ;;;;;;;;;;;AAWDE,kBAAc,sBAASC,SAAT,EAAmB;AAC7B,aAAKC,aAAL,GAAqBD,SAArB;AACH,KA/EI;;AAiFL;;;;;;;;;;;AAWAE,uBAAmB,2BAASC,UAAT,EAAoB;AACnC,aAAKC,kBAAL,GAA0BD,UAA1B;AACH,KA9FI;;AAkGL;;;;;;;;;;;AAWAE,kBAAa,wBAAU;AACnB,YAAIC,OAAO,IAAX;AACA,YAAGC,KAAKC,gBAAL,EAAH,EAA2B;AACvBC,mBAAOC,EAAP,CAAUC,aAAV,CAAwB,EAACC,iBAAiB,IAAlB,EAAxB;AACA,gBAAIC,MAAMN,KAAKO,cAAL,CAAoBC,8BAApB,EAAV;AACAC,oBAAQC,GAAR,CAAY,WAASC,KAAKC,SAAL,CAAeN,GAAf,CAArB;AACA,gBAAGA,GAAH,EAAO;AACHN,qBAAKO,cAAL,CAAoBM,KAApB,CACIP,IAAIQ,KADR,EAEIR,IAAIS,QAFR,EAGIT,IAAIU,YAHR,EAIIV,IAAIW,aAJR,EAKI,UAACC,GAAD,EAAS;AACLT,4BAAQC,GAAR,CAAY,aAAWC,KAAKC,SAAL,CAAeM,GAAf,CAAvB;AACA,wBAAIA,IAAIC,YAAJ,IAAoBC,SAApB,IAAiCF,IAAIC,YAAJ,CAAiBE,MAAjB,GAA0B,CAA/D,EAAkE;AAC9D,4BAAGtB,KAAKF,kBAAR,EAA2B;AACxBE,iCAAKF,kBAAL,CAAwBqB,GAAxB;AACF;AACJ;AACD,wBAAGA,IAAIC,YAAJ,IAAoBC,SAAvB,EAAiC;AAC7B,4BAAGrB,KAAKR,eAAR,EAAwB;AACrBQ,iCAAKR,eAAL,CAAqB2B,GAArB;AACF;AACJ;AACJ,iBAjBL,EAiBM,IAjBN,EAkBI,UAAShC,IAAT,EAAc;AACVuB,4BAAQC,GAAR,CAAY,cAAYC,KAAKC,SAAL,CAAe1B,IAAf,CAAxB;AACA,wBAAG,KAAKQ,aAAR,EAAsB;AAClB,6BAAKA,aAAL,CAAmBR,IAAnB;AACH;AACJ,iBAvBL;AAyBJ;AACJ;AAEH;;AAED;AAlJK,CAAT","file":"ShareButton.js","sourceRoot":"../../../../../assets/Script/models","sourcesContent":[" /*\n    游戏分享prefab\n    游戏的分享操作的主要逻辑在这个module里面编写\n    created by gyc on 2018-08-08.\n*/\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n      \n    },\n\n      /*\n        调用: 场景加载完成后的回调\n        功能: 场景加载完成后的一些UI逻辑处理\n        参数: [\n            无\n        ]\n        返回值:[\n            无\n        ]\n        思路: 系统自带\n    */\n    onLoad () {\n        this.data = {};\n    },\n    /*\n        调用: 组件开始调用的时候调用\n        功能: 组件开始调用的时候的逻辑处理\n        参数: [\n            无\n        ]\n        返回值:[\n            无\n        ]\n        思路: 系统自带\n    */\n    start () {\n\n    },\n    \n    /*\n        调用: 使用此model分享功能的时候 手动调用刷新分享的数据\n        功能: 设置即将要分享的数据\n        参数: [\n            data: 分享的数据\n        ]\n        返回值:[\n            无\n        ]\n        思路: 系统自带\n    */\n    setShareData:function(data){\n        this.data = data;\n    },\n\n    /*\n        调用: 使用此model分享功能的时候 \n        功能: 手动设置分享成功后的回调函数\n        参数: [\n            successCall: 分享成功后的回调方法 类型Function\n        ]\n        返回值:[\n            无\n        ]\n        思路: 逻辑需要\n    */\n    setSuccessCall: function(successCall){\n        this.successCallBack = successCall;\n    },\n\n     /*\n        调用: 使用此model分享功能的时候 \n        功能: 手动设置分享失败后的回调函数\n        参数: [\n            errorCall: 分享失败后的回调方法 类型Function\n        ]\n        返回值:[\n            无\n        ]\n        思路: 逻辑需要\n    */\n    setErrorCall: function(errorCall){\n        this.errorCallBack = errorCall;\n    },\n\n    /*\n        调用: 使用此model分享功能的时候 \n        功能: 手动设置分享失败后的回调函数\n        参数: [\n            errorCall: 分享失败后的回调方法 类型Function\n        ]\n        返回值:[\n            无\n        ]\n        思路: 逻辑需要\n    */\n    setShareGroupCall: function(sgroupCall){\n        this.shareGroupCallBack = sgroupCall;\n    },\n    \n\n\n    /*\n        调用: 使用此model分享功能的时候 \n        功能: 给好友或者群分享小程序的相关信息\n        参数: [\n            无\n        ]\n        返回值:[\n            无\n        ]\n        思路: 逻辑需要\n    */\n    shareMiniApp:function(){\n        var self = this;\n        if(tywx.IsWechatPlatform()){\n            window.wx.showShareMenu({withShareTicket: true});\n            var msg = tywx.ShareInterface.getRandomOnShareAppMessageInfo();\n            console.log(\"msg = \"+JSON.stringify(msg));\n            if(msg){\n                tywx.ShareInterface.share(\n                    msg.title,\n                    msg.imageUrl,\n                    msg.sharePointId,\n                    msg.shareSchemeId,\n                    (res) => {\n                        console.log(\"分享成功后的数据\"+JSON.stringify(res));\n                        if (res.shareTickets != undefined && res.shareTickets.length > 0) {\n                            if(self.shareGroupCallBack){\n                               self.shareGroupCallBack(res);\n                            }\n                        }\n                        if(res.shareTickets == undefined){\n                            if(self.successCallBack){\n                               self.successCallBack(res);\n                            }\n                        }\n                    },null,\n                    function(data){\n                        console.log(\"分享成功后的数2据\"+JSON.stringify(data));\n                        if(this.errorCallBack){\n                            this.errorCallBack(data);\n                        }\n                    }\n                );\n           }\n       }\n       \n    }\n\n    // update (dt) {},\n});\n"]}