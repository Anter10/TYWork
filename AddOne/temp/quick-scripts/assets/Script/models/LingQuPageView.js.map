{"version":3,"sources":["LingQuPageView.js"],"names":["cc","Class","extends","Component","properties","pagePrefab","default","type","Prefab","userItem","pageView","PageView","nextBut","Sprite","upBut","onLoad","pageIndex","page","instantiate","console","log","hindex","item","y","x","addChild","addPage","node","active","nextPage","totalpage","getPages","length","curindex","getCurrentPageIndex","scrollToPage","upPage","update"],"mappings":"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","file":"LingQuPageView.js","sourceRoot":"../../../../../assets/Script/models","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        pagePrefab:{\n            default: null,\n            type: cc.Prefab,\n        },\n        userItem:{\n            default: null,\n            type: cc.Prefab,\n        },\n        pageView:{\n            default: null,\n            type: cc.PageView,\n        },\n        nextBut:{\n            default: null,\n            type: cc.Sprite,\n        },\n        upBut:{\n            default: null,\n            type: cc.Sprite,\n        },\n    },\n \n    onLoad:function(){\n       for(var pageIndex = 0; pageIndex < 5; pageIndex ++){\n           var page = cc.instantiate(this.pagePrefab);\n           console.log(\"添加了新的view \");\n         \n           for(var hindex = 0; hindex < 6; hindex ++ ){\n                var item = cc.instantiate(this.userItem);\n                if(hindex < 3){\n                   item.y = -120;\n                   item.x = hindex * 215  - 215;\n                }else{\n                   item.y = 190;\n                   item.x = (hindex - 3) * 215 - 215;\n                }\n                page.addChild(item);\n           }\n           this.pageView.addPage(page);\n       }\n\n       this.upBut.node.active = false;\n    },\n\n   \n    //点击下一页\n    nextPage:function(){\n        var totalpage = this.pageView.getPages().length;\n        var curindex = this.pageView.getCurrentPageIndex()\n        if(curindex < totalpage){\n           this.upBut.node.active = true;\n           if(curindex == totalpage - 2){\n              this.nextBut.node.active = false;\n           }else{\n              this.nextBut.node.active = true;\n           }\n           this.pageView.scrollToPage(curindex + 1, 0.2);\n        }else{\n           this.nextBut.node.active = false;\n        }\n    },\n\n    //点击上一页\n    upPage:function(){\n        var totalpage = this.pageView.getPages().length;\n        var curindex = this.pageView.getCurrentPageIndex()\n        console.log(\"当前页面 = \"+curindex);\n        if(curindex > 0){\n           this.nextBut.node.active = true;\n           if(curindex == 1){\n              this.upBut.node.active = false;\n           }else{\n              this.upBut.node.active = true;\n           }\n           this.pageView.scrollToPage(curindex - 1, 0.2);\n        }else{\n           this.upBut.node.active = false;\n           this.nextBut.node.active = true;\n        }\n    },\n    update:function(){\n        if(this.pageView.getCurrentPageIndex() == 0){\n           this.upBut.node.active = false;\n        }else if(this.pageView.getCurrentPageIndex() == this.pageView.getPages().length - 1){\n           this.nextBut.node.active = false;\n        }else{\n           this.upBut.node.active = true;\n           this.nextBut.node.active = true;\n        }\n    }\n\n});\n"]}