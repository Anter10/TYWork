__require=function t(e,i,n){function o(c,a){if(!i[c]){if(!e[c]){var r=c.split("/");if(r=r[r.length-1],!e[r]){var l="function"==typeof __require&&__require;if(!a&&l)return l(r,!0);if(s)return s(r,!0);throw new Error("Cannot find module '"+c+"'")}}var h=i[c]={exports:{}};e[c][0].call(h.exports,function(t){return o(e[c][1][t]||t)},h,h.exports,t,e,i,n)}return i[c].exports}for(var s="function"==typeof __require&&__require,c=0;c<n.length;c++)o(n[c]);return o}({AdManager:[function(t,e,i){"use strict";cc._RF.push(e,"df1eerVKUxFH4z3gDy05qzO","AdManager"),tywx.AdManager={retryTimes:3,AnimType:{STATIC:1,SHAKE:2,FRAME:3},adNodeList:[],allAdInfoList:[],showAd:function(t){var e=new tywx.AdManager.adNodeClass;e.adInfoList=JSON.parse(JSON.stringify(tywx.AdManager.allAdInfoList)),e.createAdNode(t),tywx.AdManager.adNodeList.push(e)},getAdNodeList:function(){return this.adNodeList},getAdInfoList:function(){return this.allAdInfoList},adNodeClass:function(){this.adIconBtn=null,this.currentAdInfo=null,this.currentWebPage=null,this.adInfoList=[]},adNodeObj:{createAdNode:function(t){if(this.genRandomFirstAdInfo(),console.log(this.currentAdInfo+"\u5f53\u524d\u7684\u5e7f\u544aID = "+JSON.stringify(t)),this.currentAdInfo)if(this.adIconBtn)this.adIconBtn.active=!0;else{var e=this;cc.loader.loadRes("prefabs/adNode",function(i,n){var o=cc.instantiate(n);o.position=cc.p(t.x,t.y),e.adIconBtn=o,cc.game.addPersistRootNode(o),e.adIconNode(),e.adIconBtn.getChildByName("adButton").on("click",function(){e.onClickAdIconBtn()})})}},genRandomFirstAdInfo:function(){var t=this;if(0!=this.adInfoList.length){var e=[{weight:0,id:"000"}];for(var i in this.adInfoList){var n={weight:parseInt(t.adInfoList[i].icon_weight),id:t.adInfoList[i].icon_id};e.push(n)}e.sort(function(t,e){return t.weight>e.weight});var o=0;e.forEach(function(t){o+=t.weight});var s=parseInt(1e4*Math.random())%(o+1),c=0,a=0;for(i=0;i<e.length-1;i++)if((c+=e[i].weight)<s&&c+e[i+1].weight>=s){a=i+1;break}var r=e[a];this.adInfoList.forEach(function(e){e.icon_id==r.id&&(t.currentAdInfo=e)})}},genRandomSecondAdInfo:function(){var t=this,e=this.currentAdInfo.webpages;if(0!=e.length){var i=[{weight:0,id:"000"}];for(var n in e){var o={weight:parseInt(e[n].webpage_weight),id:e[n].config_id};i.push(o)}i.sort(function(t,e){return t.weight>e.weight});var s=0;i.forEach(function(t){s+=t.weight});var c=parseInt(1e4*Math.random())%(s+1),a=0,r=0;for(n=0;n<i.length-1;n++)if((a+=i[n].weight)<c&&a+i[n+1].weight>=c){r=n+1;break}var l=i[r];e.forEach(function(e){e.config_id==l.id&&(t.currentWebPage=e)})}},adIconNode:function(){if(this.currentAdInfo&&this.adIconBtn){var t=this.currentAdInfo.icon_type,e=this,i=this.adIconBtn.getChildByName("adIcon");this.adIconBtn.getChildByName("adButton");switch(i.stopAllActions(),i.removeComponent(cc.Animation),i.setRotation(0),tywx.BiLog.clickStat(tywx.clickStatEventType.clickStatEventTypeShowAdBtn,[e.currentAdInfo.icon_id,e.currentAdInfo.icon_type,e.currentAdInfo.icon_skip_type,e.currentAdInfo.toappid,e.currentAdInfo.togame]),t){case tywx.AdManager.AnimType.STATIC:cc.loader.load({url:e.currentAdInfo.icon_url[0]},function(t,e){t||(i.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(e),e&&e.width&&e.height&&i.setContentSize(cc.size(e.width,e.height)))});break;case tywx.AdManager.AnimType.SHAKE:cc.loader.load({url:e.currentAdInfo.icon_url[0]},function(t,e){i.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(e),e&&e.width&&e.height&&i.setContentSize(cc.size(e.width,e.height)),i.anchorX=.5,i.anchorY=.5;var n=cc.rotateBy(.06,-20),o=cc.rotateBy(.12,40),s=cc.rotateBy(.12,-40),c=cc.rotateBy(.06,20),a=cc.delayTime(1);i.runAction(cc.repeatForever(cc.sequence(n,cc.repeat(cc.sequence(o,s),4),c,a)))});break;case tywx.AdManager.AnimType.FRAME:var n=[];cc.loader.load(e.currentAdInfo.icon_url,function(t,o){if(t)for(var s=0;s<t.length;s++)cc.log("Error url ["+t[s]+"]: "+o.getError(t[s]));for(s=0;s<e.currentAdInfo.icon_url.length;s++)if(o.getContent(e.currentAdInfo.icon_url[s])){var c=new cc.SpriteFrame(o.getContent(e.currentAdInfo.icon_url[s]));n.push(c)}(function(){i.stopAllActions(),i.removeComponent(cc.Animation);var t=n[0].getTexture();t&&t.width&&t.height&&i.setContentSize(cc.size(t.width,t.height));var e=i.addComponent(cc.Animation),o=cc.AnimationClip.createWithSpriteFrames(n,10);o.name="anim_frame",o.wrapMode=cc.WrapMode.Loop,e.addClip(o),e.play("anim_frame")})()})}}},onClickAdIconBtn:function(){try{this.genRandomSecondAdInfo();var t=this.currentAdInfo.icon_skip_type,e=this.currentAdInfo.toappid,i=(this.currentAdInfo.togame,this.currentAdInfo.path),n=this.currentAdInfo.second_toappid;console.log("topath ====>"+i);var o=this;if(tywx.BiLog.clickStat(tywx.clickStatEventType.clickStatEventTypeClickAdBtn,[o.currentAdInfo.icon_id,o.currentAdInfo.toappid,o.currentAdInfo.togame]),wx&&wx.navigateToMiniProgram)return 1==t?void wx.navigateToMiniProgram({appId:e,path:i||"?from=adcross",envVersion:"release",extraData:{from:i||"?from=adcross"},success:function(t){tywx.BiLog.clickStat(tywx.clickStatEventType.clickStatEventTypeClickDirectToMiniGameSuccess,[o.currentAdInfo.icon_id,o.currentWebPage.config_id,o.currentWebPage.webpage_url,o.currentAdInfo.toappid,o.currentAdInfo.togame]),console.log("wx.navigateToMiniProgram success"),console.log(t)},fail:function(t){tywx.BiLog.clickStat(tywx.clickStatEventType.clickStatEventTypeClickDirectToMiniGameFail,[o.currentAdInfo.icon_id,o.currentWebPage.config_id,o.currentWebPage.webpage_url,o.currentAdInfo.toappid,o.currentAdInfo.togame]),console.log("wx.navigateToMiniProgram fail"),console.log(t)},complete:function(t){console.log("navigateToMiniProgram ==== complete"),o.resetBtnIcon()}}):void(2==t?wx.navigateToMiniProgram({appId:n,path:i||"?from=adcross",envVersion:"release",extraData:{from:i||"?from=adcross"},success:function(t){tywx.BiLog.clickStat(tywx.clickStatEventType.clickStatEventTypeClickDirectToMiniGameSuccess,[o.currentAdInfo.icon_id,o.currentWebPage.config_id,o.currentWebPage.webpage_url,o.currentAdInfo.toappid,o.currentAdInfo.togame]),console.log("wx.navigateToMiniProgram success"),console.log(t)},fail:function(t){tywx.BiLog.clickStat(tywx.clickStatEventType.clickStatEventTypeClickDirectToMiniGameFail,[o.currentAdInfo.icon_id,o.currentWebPage.config_id,o.currentWebPage.webpage_url,o.currentAdInfo.toappid,o.currentAdInfo.togame]),console.log("wx.navigateToMiniProgram fail"),console.log(t)},complete:function(t){o.resetBtnIcon(),console.log("navigateToMiniProgram ==== complete")}}):console.error("Unsupported skip type! Please Check!"));if(!this.currentWebPage)return;console.log("\u5f53\u524d\u8981\u9884\u89c8\u7684\u56fe============\u300b"+o.currentWebPage.webpage_url),tywx.BiLog.clickStat(tywx.clickStatEventType.clickStatEventTypeClickShowQRCode,[o.currentAdInfo.icon_id,o.currentWebPage.config_id,o.currentWebPage.webpage_url,o.currentAdInfo.toappid,o.currentAdInfo.togame]),tywx.IsWechatPlatform()&&wx.previewImage({current:[o.currentWebPage.webpage_url],urls:[o.currentWebPage.webpage_url],success:function(t){tywx.LOGD(null,"\u9884\u89c8\u56fe\u7247\u6210\u529f\uff01")},fail:function(t){tywx.LOGD(null,"\u9884\u89c8\u56fe\u7247\u5931\u8d25\uff01")},complete:function(t){console.log("\u9884\u89c8\u56fe\u7247\u5b8c\u6210"),o.resetBtnIcon()}})}catch(t){tywx.LOGE("error:","tywx.AdManager.onClickAdIconBtn\u2014\u2014"+JSON.stringify(t))}},resetBtnIcon:function(){this.adIconBtn&&(this.genRandomFirstAdInfo(),this.adIconNode())},onForeGround:function(){this.adIconNode()},showAdNode:function(){this.adIconBtn&&this.adIconBtn&&(this.adIconBtn.active=!0)},hideAdNode:function(){this.adIconBtn&&this.adIconBtn&&(this.adIconBtn.active=!1)}},requestADInfo:function(){try{if(!tywx.IsWechatPlatform())return;this.retryTimes--;var t={},e=(new Date).getTime();t.act="api.getCrossConfig",t.time=e,t.game_mark=tywx.SystemInfo.cloudId+"-"+tywx.SystemInfo.gameId;var i=this.getConfigSignStr(t),n=[];for(var o in t)n.push(o+"="+t[o]);n.push("sign="+i);var s=tywx.SystemInfo.shareManagerUrl+"?"+n.join("&"),c=this;console.log("\u5e7f\u544a\u4fe1\u606f\u5730\u5740 = "+s),wx.request({url:s,method:"GET",success:function(t){if(200==t.statusCode){var e=t.data;if(c.allAdInfoList=[],e.retmsg)for(var i in e.retmsg){var n=e.retmsg[i];void 0==n.icon_weight&&(n.icon_weight=0),Math.floor(n.icon_weight)>.1&&c.allAdInfoList.push(n)}}else c.retryTimes>0?c.requestADInfo():c.retryTimes=3},fail:function(t){c.retryTimes>0?c.requestADInfo():c.retryTimes=3}})}catch(t){tywx.LOGE("error:","tywx.AdManager.requestADInfo\u2014\u2014"+JSON.stringify(t))}},freshAdIconByTime:function(){if(0!=tywx.AdManager.adNodeList.length)for(var t=0;t<tywx.AdManager.adNodeList.length;t++){var e=tywx.AdManager.adNodeList[t];e&&e.resetBtnIcon&&e.resetBtnIcon()}},startFreshAdIcon:function(){for(var t=10,e=0;e<this.allAdInfoList.length;e++){var i=this.allAdInfoList[e].icon_interval;if(i){t=parseInt(i)>0?parseInt(i):t;break}}tywx.Timer.cancelTimer(cc.director,tywx.AdManager.freshAdIconByTime),tywx.Timer.setTimer(cc.director,tywx.AdManager.freshAdIconByTime,t,cc.macro.REPEAT_FOREVER,t)},onForeGround:function(){for(var t=0;t<this.adNodeList.length;t++){var e=this.adNodeList[t];e&&e.onForeGround&&e.onForeGround()}this.startFreshAdIcon()},getConfigSignStr:function(t){for(var e=Object.keys(t).sort(),i="",n=0;n<e.length;n++){var o=e[n];"act"!=o&&"sign"!=o&&(i+=o+"="+t[o])}return tywx.hex_md5("market.tuyoo.com-api-"+i+"-market.tuyoo-api")||""}},tywx.AdManager.adNodeClass.prototype=tywx.AdManager.adNodeObj,tywx.AdManager.requestADInfo(),cc._RF.pop()},{}],AddOneConfig:[function(t,e,i){"use strict";cc._RF.push(e,"7c2dbJUdiZLmIzaqT+PBih/","AddOneConfig");e.exports={gezi_size:132,gezi_pitch:140,move_time:.3,swidth:720,sheight:1280,maxphy_value:5,geziNumber:25,minCanRemoveNumber:3,baseScore:10,maxrnum:2,marginbottom:270,thanfriendScore:30,lianjiEffects:{sgood:3,cgood:6,bgood:10,maxgood:15},showphy_pros:{width:130,height:40,radius:6,phy_num:5,colors:[[255,0,0],[255,165,0],[255,255,0],[0,255,0],[0,127,255],[0,0,255],[139,0,255]]},color_list:[[233,85,56],[255,128,64],[44,175,219],[165,198,31],[23,177,167],[0,128,0],[0,0,128],[128,0,0],[128,64,32],[128,0,128],[32,32,32]],gameState:{checkclick:1,domove:2,dodrop:3,waitclick:4,gameover:5},allitem:{item1:{id:"",name:"",png:"",value:""},item2:{id:"",name:"",png:"",value:""},item3:{id:"",name:"",png:"",value:""},item4:{id:"",name:"",png:"",value:""}}},cc._RF.pop()},{}],Audio:[function(t,e,i){"use strict";cc._RF.push(e,"20442ihUflFKaQJxOXGGXzI","Audio"),cc.Class({extends:cc.Component,properties:{audioSource:{type:cc.AudioSource,default:null},audioState:1},onLoad:function(){cc.audioEngine.setMaxWebAudioSize(10240)},controlAudio:function(){1==this.audioState?(this.pause(),this.audioState=0):0==this.audioState&&(this.play(),this.audioState=1)},play:function(){this.audioSource.play()},pause:function(){this.audioSource.pause()},stop:function(){this.audioSource.stop()},resume:function(){this.audioSource.resume()},changeButtonTexture:function(){0==this.audioState||1==this.audioState||console.log("\u72b6\u6001\u4e0d\u5bf9")}}),cc._RF.pop()},{}],BiStatLog:[function(t,e,i){"use strict";cc._RF.push(e,"90a3eZ8TQtA5bHoh6KlWkIU","BiStatLog");var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};tywx.BiStatLog={BiStatInfo:null,init:function(){this.BiStatInfo={},this.getStaticInfo(),this.getTyInfo(),this.getLocationInfo(),this.getSystemInfo()},getStaticInfo:function(){this.BiStatInfo.IP="#IP",this.BiStatInfo.receiveTime="#receiveTime"},getTyInfo:function(){this.BiStatInfo.cloudId=tywx.SystemInfo.cloudId,this.BiStatInfo.gameId=tywx.SystemInfo.gameId,this.BiStatInfo.appId=tywx.SystemInfo.appId,this.BiStatInfo.clientId=tywx.SystemInfo.clientId,this.BiStatInfo.intClientId=tywx.SystemInfo.intClientId,this.BiStatInfo.userId=tywx.UserInfo.userId,this.BiStatInfo.uuid=tywx.Util.getLocalUUID(),this.BiStatInfo.gameVersion=tywx.SystemInfo.version,this.BiStatInfo.wxAppId=tywx.SystemInfo.wxAppId},getUserId:function(){this.BiStatInfo.userId=tywx.UserInfo.userId},getNetworkType:function(){this.BiStatInfo.networkType=tywx.StateInfo.networkType},getLocationInfo:function(t){var e=this;wx.getLocation({type:"wgs84",success:function(t){e.BiStatInfo.latitude=t.latitude,e.BiStatInfo.longitude=t.longitude,e.BiStatInfo.speed=t.speed,e.BiStatInfo.accuracy=t.accuracy},complete:function(){t()}})},getSystemInfo:function(){var t=this;wx.getSystemInfo({success:function(e){t.BiStatInfo.brand=e.brand,t.BiStatInfo.model=e.model,t.BiStatInfo.pixelRatio=e.pixelRatio,t.BiStatInfo.screenWidth=e.screenWidth,t.BiStatInfo.screenHeight=e.screenHeight,t.BiStatInfo.windowWidth=e.windowWidth,t.BiStatInfo.windowHeight=e.windowHeight,t.BiStatInfo.language=e.language,t.BiStatInfo.wxVersion=e.version,t.BiStatInfo.systemVersion=e.system,t.BiStatInfo.platform=e.platform,t.BiStatInfo.wxSDKVersion=e.SDKVersion,t.BiStatInfo.fontSizeSetting=e.fontSizeSetting}})},sendEvent:function(t,e){"object"!=(void 0===e?"undefined":n(e))&&(e={}),this.getNetworkType(),this.getUserId(),this.BiStatInfo.eventId=t,this.BiStatInfo.eventParams=e,this.BiStatInfo.eventTime=Date.now().valueOf();this.getLocationInfo(function(){var t=JSON.stringify(tywx.BiStatLog.BiStatInfo),e={url:tywx.SystemInfo.biLogServer,headers:["Content-Type:text/plain"],postData:t};tywx.HttpUtil.httpPost(e)})}},cc._RF.pop()},{}],Bilog:[function(t,e,i){"use strict";cc._RF.push(e,"a45feWlbRdJCJl38fZtQxK0","Bilog"),tywx.clickStatEventType={clickStatEventTypeUserFrom:99990001,clickStatEventTypeUserShare:99990002,clickStatEventTypeShowAdBtn:99990003,clickStatEventTypeClickShowQRCode:99990004,clickStatEventTypeClickAdBtn:99990007,clickStatEventTypeClickDirectToMiniGameSuccess:99990005,clickStatEventTypeClickDirectToMiniGameFail:99990006,clickStatEventTypeSubmitVersionInfo:9999,clickStatEventTypeWxLoginStart:10001,clickStatEventTypeWxLoginSuccess:10002,clickStatEventTypeWxLoginFailed:10003,clickStatEventTypeAuthorizationStart:10004,clickStatEventTypeAuthorizationSuccess:10005,clickStatEventTypeAuthorizationFailed:10006,clickStatEventTypeLoginSDKStart:10007,clickStatEventTypeLoginSDKSuccess:10008,clickStatEventTypeLoginSDKFailed:10009,clickStatEventTypeTCPStart:10010,clickStatEventTypeTCPSuccess:10011,clickStatEventTypeTCPFailed:10012},tywx.BiLog={uploadLogTimely:function(t){if(tywx.StateInfo.networkConnected){if(t){var e={url:tywx.SystemInfo.errorLogServer+"?cloudname="+tywx.SystemInfo.cloudId+"."+tywx.SystemInfo.intClientId,header:["Content-Type:text/plain"],postData:t,callback:null};tywx.HttpUtil.httpPost(e,"POST")}}else tywx.LOGD("tywx.BiLog","net error!")},getSystemInfo:function(){this.cloud_id=tywx.SystemInfo.cloudId,this.rec_type="1",this.rec_id="0",this.receive_time="0",this.user_id=tywx.UserInfo.userId||"0",this.game_id=tywx.SystemInfo.gameId,this.client_id=tywx.SystemInfo.clientId,this.device_id=tywx.Util.getLocalUUID(),this.ip_addr="#IP",this.nettype="0",this.phone_maker="0",this.phone_model=tywx.UserInfo.model,this.phone_carrier="0",this.reserved="0"},uploadClickStatLogTimely:function(t){if(void 0!=t&&""!=t)var e={url:tywx.SystemInfo.biLogServer,headers:["Content-Type:text/plain"],postData:t,obj:this,tag:null,callback:null};tywx.HttpUtil.httpPost(e,"POST")},clickStat:function(t,e){var i=[];if((e=e||[]).length<10)for(var n=0;n<9;n++)n<e.length?i.push(e[n]):i.push(0);else i=e;tywx.LOGD("BI\u6253\u70b9","eventid= "+t+" \u63cf\u8ff0 = "+JSON.stringify(i));var o=this.assemblelog(t,i);this.uploadClickStatLogTimely(o+"\n")},assemblelog:function(t,e){var i=(new Date).getTime();i-this._timetag>6e4&&(this._timetag=i,this.nettype=0);var n=e.join("\t");this.getSystemInfo();var o=this.cloud_id+"\t"+this.rec_type+"\t"+i+"\t"+this.rec_id+"\t"+this.receive_time+"\t"+t+"\t"+this.user_id+"\t"+this.game_id+"\t"+this.client_id+"\t"+this.device_id+"\t"+this.ip_addr+"\t"+this.nettype+"\t"+this.phone_maker+"\t"+this.phone_model+"\t"+this.phone_carrier+"\t"+n+"\t"+this.reserved;return this.trimTab0(o)},trimTab0:function(t){return null==t||void 0==t?"":t.replace(/(\t0)*$/,"")}},cc._RF.pop()},{}],DjItem:[function(t,e,i){"use strict";cc._RF.push(e,"025741aQaVM6ri3/vUJrdf4","DjItem"),cc.Class({extends:cc.Component,properties:{djName:{default:null,type:cc.Label},djNumber:{default:null,type:cc.Label},djIcon:{default:null,type:cc.Sprite}},setData:function(t){this.data=t,this.flushView()},flushView:function(){this.flushIcon(),this.flushName(),this.flushNumber()},getData:function(){return this.data},showUse:function(){this.useCallBack&&this.useCallBack()},setUseCall:function(t){this.useCallBack=t},clickCall:function(){this.clickcallBack&&this.clickcallBack()},setClickCall:function(t){this.clickcallBack=clickcalll},onLoad:function(){this.data={}},flushNumber:function(){this.djNumber.string=self.data.name},flushName:function(){this.djName.string=self.data.name},flushIcon:function(){this.djName.string=self.data.name}}),cc._RF.pop()},{}],Effect:[function(t,e,i){"use strict";cc._RF.push(e,"5ac62QVqmtLEaM3z/RAOb1S","Effect");t("AddOneConfig");var n=cc.Class({name:"node",extends:cc.Component,properties:{label:{default:null,type:cc.Label}},onLoad:function(){tywx.Timer.setTimer(this,this.remove,5),this.label.string="0"},remove:function(){this.node.destroy()},ctor:function(t){},update:function(t){}});e.exports=n,cc._RF.pop()},{AddOneConfig:"AddOneConfig"}],EncodeDecode:[function(t,e,i){"use strict";cc._RF.push(e,"212c6G8muNL3I6ehD5SwKBE","EncodeDecode"),tywx.EncodeDecode={base64Encode:function(t){for(var e,i,n,o,s,c,a,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l="",h=0,u=(t=tywx.EncodeDecode.utf8Encode(t)).length;h<u;)o=(e=t.charCodeAt(h++))>>2,s=(3&e)<<4|(i=t.charCodeAt(h++))>>4,c=(15&i)<<2|(n=t.charCodeAt(h++))>>6,a=63&n,isNaN(i)?c=a=64:isNaN(n)&&(a=64),l=l+r.charAt(o)+r.charAt(s)+r.charAt(c)+r.charAt(a);return l},base64Decode:function(t){for(var e,i,n,o,s,c,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r=0,l=(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length,h=[];r<l;)e=a.indexOf(t.charAt(r++))<<2|(o=a.indexOf(t.charAt(r++)))>>4,i=(15&o)<<4|(s=a.indexOf(t.charAt(r++)))>>2,n=(3&s)<<6|(c=a.indexOf(t.charAt(r++))),h.push(e),64!=s&&h.push(i),64!=c&&h.push(n);return h},utf8Encode:function(t){for(var e="",i=0,n=(t=t.replace(/\r\n/g,"\n")).length;i<n;i++){var o=t.charCodeAt(i);o<128?e+=String.fromCharCode(o):o>127&&o<2048?(e+=String.fromCharCode(o>>6|192),e+=String.fromCharCode(63&o|128)):(e+=String.fromCharCode(o>>12|224),e+=String.fromCharCode(o>>6&63|128),e+=String.fromCharCode(63&o|128))}return e},utf8Decode:function(t){for(var e,i="",n=0,o=e=0,s=t.length;n<s;)(o=t[n])<128?(i+=String.fromCharCode(o),n++):o>191&&o<224?(e=t[n+1],i+=String.fromCharCode((31&o)<<6|63&e),n+=2):(e=t[n+1],c3=t[n+2],i+=String.fromCharCode((15&o)<<12|(63&e)<<6|63&c3),n+=3);return i}},cc._RF.pop()},{}],EventType:[function(t,e,i){"use strict";cc._RF.push(e,"8800fILNG5HRYmeMOw2+z72","EventType"),tywx.EventType={TCP_ERROR:"tcp_error",TCP_CLOSE:"tcp_close",TCP_OPENED:"tcp_opened",TCP_RECONNECT:"tcp_reconnect",TCP_RECEIVE:"tcp_receive",SDK_LOGIN_SUCCESS:"sdk_login_success",SDK_LOGIN_FAIL:"sdk_login_fail",WEIXIN_LOGIN_SUCCESS:"weixin_login_success",WEIXIN_LOGIN_FAIL:"weixin_login_fail",GET_USER_FEATURE_SUCCESS:"GET_USER_FEATURE_SUCCESS",GET_USER_FEATURE_FAIL:"GET_USER_FEATURE_FAIL",GET_SHARE_CONFIG_SUCCESS:"GET_SHARE_CONFIG_SUCCESS",GET_SHARE_CONFIG_FAIL:"GET_SHARE_CONFIG_FAIL",GET_OPEN_DATA_RESULT_SUCCESS:"GET_OPEN_DATA_RESULT_SUCCESS",GET_OPEN_DATA_RESULT_FAIL:"GET_OPEN_DATA_RESULT_FAIL",GET_OPEN_DATA_RESULT_TIMEOUT:"GET_OPEN_DATA_RESULT_TIMEOUT",SEND_HEART_BEAT:"SEND_HEART_BEAT",GAME_SHOW:"GAME_SHOW",GAME_HIDE:"GAME_HIDE",START_AUTHORIZATION_SUCCESS:"START_AUTHORIZATION_SUCCESS",START_AUTHORIZATION_FAILED:"START_AUTHORIZATION_FAILED"},cc._RF.pop()},{}],GeZiData:[function(t,e,i){"use strict";cc._RF.push(e,"3d097Vg8K9IEY9dJK6ESEnd","GeZiData");var n=t("AddOneConfig");e.exports=function(t){this.color=null,this.num=0,this.posx=0,this.posy=0,this.destx=0,this.desty=0,this.actiontime_keep=0,this.speed_keep=0,this.id_keep=-1,this.id_dest=-1,this.parent=t,this.speedx=0,this.speedy=0,this.actiontime=0,this.effectid=-1,this.effecttime=0,this.setinfo=function(t,e){this.color=t,this.num=e},this.setpos=function(t,e){this.posx=t,this.posy=e},this.setspeed=function(t,e,i){this.speedx=t,this.speedy=e,this.actiontime=i},this.setdest=function(t,e){this.destx=t,this.desty=e},this.adjustmove=function(){if(-1!=this.id_dest){this.actiontime=this.actiontime_keep;var t=this.id_dest-this.id_keep;1==t?(this.speedx=this.speed_keep,this.speedy=0):5==t?(this.speedx=0,this.speedy=this.speed_keep):-1==t?(this.speedx=-this.speed_keep,this.speedy=0):-5==t&&(this.speedx=0,this.speedy=-this.speed_keep),this.destx=this.parent.getAllgz()[this.id_dest].posx,this.desty=this.parent.getAllgz()[this.id_dest].posy}},this.adjustdrop=function(){-1!=this.id_dest&&(this.actiontime=n.move_time,this.speedx=0,this.speedy=-this.speed_keep,this.destx=this.parent.getAllgz()[this.id_dest].posx,this.desty=this.parent.getAllgz()[this.id_dest].posy)},this.tickmove=function(t){this.actiontime>0&&(this.actiontime-=t,this.posx+=this.speedx*t,this.posy+=this.speedy*t,this.actiontime<=0&&(this.posx=this.destx,this.posy=this.desty,this.speedx=0,this.speedy=0,this.id_keep=this.id_dest,this.id_dest=this.parent.getAllmask()[this.id_dest].from,this.adjustmove()))},this.tickeffect=function(t,e,i){this.effectid>=0&&this.effecttime>0&&(0==this.effectid?(e.node.x=this.posx+n.gezi_size/2,e.node.y=this.posy+n.gezi_size/2+2,0==e.node.active&&(e.node.active=!0)):1==this.effectid&&(i.node.x=this.posx+n.gezi_size/2,i.node.y=this.posy+n.gezi_size/2,i.node.setScale(1-this.effecttime),0==i.node.active&&(i.node.active=!0)),this.effecttime-=t,this.effecttime<=0&&(this.effecttime=0,1==e.node.active&&0==this.effectid&&(e.node.active=!1),1==i.node.active&&1==this.effectid&&(i.node.active=!1),this.effectid=-1))}},cc._RF.pop()},{AddOneConfig:"AddOneConfig"}],GeZiMask:[function(t,e,i){"use strict";cc._RF.push(e,"822d8Kg5aNMzZtrXCJqyo4w","GeZiMask"),e.exports=function(t,e){this.id=t,this.parent=e;var i=this.parent.getAllgz()[t];this.num=i.num,this.x=this.id%5,this.y=parseInt(this.id/5),this.from=-1,this.step=999,this.reset=function(){var t=this.parent.getAllgz()[this.id];this.num=t.num,this.x=this.id%5,this.y=parseInt(this.id/5),this.from=-1,this.step=999}},cc._RF.pop()},{}],GeZi:[function(t,e,i){"use strict";cc._RF.push(e,"0cdeagIMvtLqY2J7/940TKm","GeZi");var n=t("AddOneConfig"),o=t("GeZiData");e.exports=function(t,e){this.id=t,this.color=cc.color(0,0,0,0),this.num=0,this.parent=e,this.posx=(n.swidth-5*n.gezi_pitch)/2+t%5*n.gezi_pitch,this.posy=n.marginbottom+parseInt(t/5)*n.gezi_pitch,this.block=new o(this),this.setnum=function(t){this.num=t;var e=t-1;this.num>n.color_list.length&&(e%=n.color_list.length);var i=n.color_list[e],o=cc.color(i[0],i[1],i[2]);this.setColor(o)},this.setColor=function(t){this.color=t},this.getAllgz=function(){return this.parent.getAllgz()},this.getAllmask=function(){return this.parent.getAllmask()},this.settoblock=function(){this.block.setinfo(this.color,this.num),this.block.setpos(this.posx,this.posy)},this.settoblockvalue=function(){this.block.setinfo(this.color,this.num)},this.draw=function(t,e,i){e.string=this.block.num,e.node.x=this.block.posx-360+n.gezi_size/2,e.node.y=this.block.posy-640+n.gezi_size/2;var o=i.getComponent("celltile"),s=this.block.num;s>10&&(s%=10),o.visByNum(s),i.getComponent(cc.Sprite).node.x=this.block.posx-360+n.gezi_size/2,i.getComponent(cc.Sprite).node.y=this.block.posy-640+n.gezi_size/2}},cc._RF.pop()},{AddOneConfig:"AddOneConfig",GeZiData:"GeZiData"}],HttpUtil:[function(t,e,i){"use strict";cc._RF.push(e,"fd871GUm15FYrW6yO2GJk+Z","HttpUtil"),tywx.HttpUtil={httpPost:function(t,e){try{tywx.IsWechatPlatform()&&wx.request({url:t.url,data:t.postData,header:t.header,method:"POST",dataType:"json",success:function(t){200==t.statusCode?t.data&&t.data.hasOwnProperty("/api/bilog5/clientlog")&&"ok"==t.data["/api/bilog5/clientlog"]&&tywx.LOGD("ty.HttpUtil.httpPost","post success! "):tywx.LOGD("ty.HttpUtil.httpPost","statusCode:"+t.statusCode)},fail:function(e){tywx.LOGD("ty.HttpUtil.httpPost","post error! "+t.url)}})}catch(t){tywx.LOGE("error:","tywx.HttpUtil.httpPost\u2014\u2014"+JSON.stringify(t))}},httpGet:function(t,e,i){try{tywx.IsWechatPlatform()&&(tywx.LOGD("ty.HttpUtil.httpGet","url:"+t.url),wx.request({url:t.url,method:"GET",success:function(t){200==t.statusCode?(tywx.LOGD("ty.HttpUtil.httpGet","res:"+JSON.stringify(t.data)),e&&e(t.data)):tywx.LOGD("ty.HttpUtil.httpGet","statusCode:"+t.statusCode)},fail:function(e){tywx.LOGD("ty.HttpUtil.httpGet","post error! "+t.url),i&&i(e)}}))}catch(t){tywx.LOGE("error:","tywx.HttpUtil.httpGet\u2014\u2014"+JSON.stringify(t))}}},cc._RF.pop()},{}],NotificationCenter:[function(t,e,i){"use strict";cc._RF.push(e,"44a10uteLtK17QgCpRYbmPO","NotificationCenter"),console.log("NotificationCenter loaded"),tywx.NotificationCenter={events:{},listen:function(t,e,i){this.events[t]=this.events[t]||[],this.events[t].push({scope:i||this,handler:e})},ignore:function(t,e,i){i=i||this;var n=this.events[t];n&&(this.events[t]=n.filter(function(t){return t.scope!=i||t.handler!=e}))},ignoreScope:function(t){for(var e in this.events){var i=this.events[e];i&&(this.events[e]=i.filter(function(i){return i.scope!=t||(tywx.LOGD("tywx.NotificationCenter","ty.NotificationCenter : remove listener by Scope: "+e),!1)}))}},trigger:function(t,e){tywx.LOGD("EventTrigger",t);var i=this.events[t];if(i)for(var n,o=0;o<i.length;o++)(n=i[o]).handler.call(n.scope,e)}},cc._RF.pop()},{}],PropagateInterface:[function(t,e,i){"use strict";cc._RF.push(e,"f84e67jMaRKho5zRhizuHUj","PropagateInterface");var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};tywx.PropagateInterface={ShareConfig:{},getShareConfigInfo:function(t){"object"!=(void 0===t?"undefined":n(t))&&(t={});var e=(new Date).getTime();t.act="api.getShareConfig",t.time=e,t.game_mark=tywx.SystemInfo.cloudId+"-"+tywx.SystemInfo.gameId;var i=this.getConfigSignStr(t),o=[];for(var s in t)o.push(s+"="+t[s]);o.push("sign="+i);var c=tywx.SystemInfo.shareManagerUrl+"?"+o.join("&");tywx.HttpUtil.httpGet({url:c},function(t){for(var e in tywx.LOGE("GET_SHARE_CONFIG_INFO_SUCCESS",JSON.stringify(t)),t.retmsg)tywx.PropagateInterface.ShareConfig[e]=t.retmsg[e];tywx.NotificationCenter.trigger(tywx.EventType.GET_SHARE_CONFIG_SUCCESS,t)},function(t){tywx.LOGE("GET_SHARE_CONFIG_INFO_FAIL",JSON.stringify(t)),tywx.NotificationCenter.trigger(tywx.EventType.GET_SHARE_CONFIG_FAIL,t)})},_cachedShareConfig:void 0,_pendingFlag:!1,getShareConfigInfoAutoWeight:function(){void 0==this._cachedShareConfig?this._pendingFlag=!0:tywx.NotificationCenter.trigger(tywx.EventType.GET_SHARE_CONFIG_SUCCESS,this._shuffleByWeights())},_doHttpGetShareConfig:function(){var t={},e=(new Date).getTime();t.act="api.getShareConfig",t.time=e,t.game_mark=tywx.SystemInfo.cloudId+"-"+tywx.SystemInfo.gameId;var i=this.getConfigSignStr(t),n=[];for(var o in t)n.push(o+"="+t[o]);n.push("sign="+i);var s=tywx.SystemInfo.shareManagerUrl+"?"+n.join("&"),c=this;tywx.HttpUtil.httpGet({url:s},function(t){c._cachedShareConfig=t.retmsg,c._pendingFlag&&(tywx.NotificationCenter.trigger(tywx.EventType.GET_SHARE_CONFIG_SUCCESS,c._shuffleByWeights()),c._pendingFlag=!1)},function(t){c._pendingFlag&&(tywx.NotificationCenter.trigger(tywx.EventType.GET_SHARE_CONFIG_FAIL,t),c._pendingFlag=!1);var e=function(){c._doHttpGetShareConfig()};"undefined"!=typeof cc&&cc.director?tywx.Timer.setTimer(cc.director,e,10,0,0):setTimeout(e,1e4)})},_shuffleByWeights:function(){var t={};for(var e in this._cachedShareConfig)if("shareExt"!=e){var i=this._cachedShareConfig[e];if(0==i.length)t[e]={};else if(1==i.length)t[e]=i[0];else for(var n=i.reduce(function(t,e){return t+e.weight},0),o=Math.random()*n,s=0;s<i.length;s++)if((o-=i[s].weight)<=0){t[e]=i[s];break}}return t},getUserFeatureInfo:function(){var t={},e=(new Date).getTime();t.act="api.getUserFeature",t.cloud_id=tywx.SystemInfo.cloudId,t.game_id=tywx.SystemInfo.gameId,t.user_id=tywx.UserInfo.userId,t.time=e;var i=this.getConfigSignStr(t),n=[];for(var o in t)n.push(o+"="+t[o]);n.push("sign="+i);var s=tywx.SystemInfo.shareManagerUrl+"?"+n.join("&");tywx.HttpUtil.httpGet({url:s},function(t){tywx.NotificationCenter.trigger(tywx.EventType.GET_USER_FEATURE_SUCCESS,t)},function(t){tywx.NotificationCenter.trigger(tywx.EventType.GET_USER_FEATURE_FAIL,t)})},getConfigSignStr:function(t){for(var e=Object.keys(t).sort(),i="",n=0;n<e.length;n++){var o=e[n];"act"!=o&&"sign"!=o&&(i+=o+"="+t[o])}return tywx.hex_md5("market.tuyoo.com-api-"+i+"-market.tuyoo-api")||""}},cc._RF.pop()},{}],ShareButton:[function(t,e,i){"use strict";cc._RF.push(e,"2fada/8fPBHRZzD6uWmYAck","ShareButton"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.data={}},start:function(){},setShareData:function(t){this.data=t},setSuccessCall:function(t){this.successCallBack=t},setErrorCall:function(t){this.errorCallBack=t},setShareGroupCall:function(t){this.shareGroupCallBack=t},shareMiniApp:function(){var t=this;if(tywx.IsWechatPlatform()){window.wx.showShareMenu({withShareTicket:!0});var e=tywx.ShareInterface.getRandomOnShareAppMessageInfo();console.log("msg = "+JSON.stringify(e)),e&&tywx.ShareInterface.share(e.title,e.imageUrl,e.sharePointId,e.shareSchemeId,function(e){console.log("\u5206\u4eab\u6210\u529f\u540e\u7684\u6570\u636e"+JSON.stringify(e)),void 0!=e.shareTickets&&e.shareTickets.length>0&&t.shareGroupCallBack&&t.shareGroupCallBack(e),t.successCallBack&&t.successCallBack(e)},null,function(t){console.log("\u5206\u4eab\u6210\u529f\u540e\u7684\u65702\u636e"+JSON.stringify(t)),this.errorCallBack&&this.errorCallBack(t)})}}}),cc._RF.pop()},{}],ShareInterface:[function(t,e,i){"use strict";cc._RF.push(e,"3c75dKqoYpHWK7HVXbWXGeV","ShareInterface"),tywx.ShareInterface={OnShareAppMessageInfo:null,setOnShareAppMessageInfo:function(t,e,i,n){this.OnShareAppMessageInfo={title:t,imageUrl:e,sharePointId:i,shareSchemeId:n}},getOnShareAppMessageInfo:function(){return this.OnShareAppMessageInfo},getRandomOnShareAppMessageInfo:function(){var t=[];for(var e in tywx.PropagateInterface._cachedShareConfig)t.push(e);if(t&&t.length>0){var i=Math.floor(1e4*Math.random())%t.length,n=t[i],o=tywx.PropagateInterface._cachedShareConfig[n];if(o&&o.length>0)return{title:o[i=Math.floor(1e4*Math.random())%o.length].shareContent,imageUrl:o[i].sharePicUrl,sharePointId:o[i].sharePointId,shareSchemeId:o[i].shareSchemeId}}return null},share:function(t,e,i,n,o,s,c){try{tywx.IsWechatPlatform()&&(tywx.BiLog.clickStat(tywx.clickStatEventType.clickStatEventTypeUserShare,[i,1,n]),wx.shareAppMessage({title:t,imageUrl:e,query:"inviteCode="+tywx.UserInfo.userId+"&sourceCode="+i+"&inviteName="+tywx.UserInfo.userName+"&imageType="+n+"&extraInfo="+(c||""),success:function(t){o&&o(t),tywx.BiLog.clickStat(tywx.clickStatEventType.clickStatEventTypeUserShare,[i,2,n])},fail:function(t){s&&s(t)},complete:function(){}}))}catch(t){tywx.LOGE("error:","tywx.ShareInterface.share\u2014\u2014"+JSON.stringify(t))}}},tywx.onShareAppMessageInit=function(){try{tywx.IsWechatPlatform()&&wx.onShareAppMessage(function(t){var e=tywx.ShareInterface.getOnShareAppMessageInfo();return null==e&&(e=tywx.ShareInterface.getRandomOnShareAppMessageInfo()),tywx.BiLog.clickStat(tywx.clickStatEventType.clickStatEventTypeUserShare,[e.sharePointId,1,e.shareSchemeId]),{title:e.title,imageUrl:e.imageUrl,query:"inviteCode="+tywx.UserInfo.userId+"&sourceCode="+e.sharePointId+"&inviteName="+tywx.UserInfo.userName+"&imageType="+e.shareSchemeId,success:function(t,i){tywx.BiLog.clickStat(tywx.clickStatEventType.clickStatEventTypeUserShare,[e.sharePointId,2,e.shareSchemeId])},fail:function(){},complete:function(){}}})}catch(t){tywx.LOGE("error:","tywx.ShareInterface.share\u2014\u2014"+JSON.stringify(t))}},tywx.onShareAppMessageInit(),cc._RF.pop()},{}],TCPClient:[function(t,e,i){"use strict";cc._RF.push(e,"1c7992Uy+xGQqrj2j6qnISd","TCPClient"),tywx.TCPClient={TAG:"TCP client",CONNECT_STATUS_OK:1,CONNECT_STATUS_OPENING:2,CONNECT_STATUS_CLOSING:3,CONNECT_STATUS_FAIL:0,connectStatus:0,isTimerInited:!1,tickCount:0,filterCmds:["heart_beat"],timerSchedule:function(){tywx.TCPClient.tickCount=(tywx.TCPClient.tickCount+1)%3,2==tywx.TCPClient.tickCount&&tywx.TCPClient.connectStatus==tywx.TCPClient.CONNECT_STATUS_OK&&tywx.NotificationCenter.trigger(tywx.EventType.SEND_HEART_BEAT),tywx.TCPClient.reconnet()},startCheckTimer:function(){tywx.TCPClient.isTimerInited=!0,tywx.Timer.setTimer(cc.director,this.timerSchedule,1)},stopCheckTimer:function(){tywx.TCPClient.isTimerInited=!1,tywx.Timer.cancelTimer(cc.director,this.timerSchedule)},connect:function(t){tywx.BiLog.clickStat(tywx.clickStatEventType.clickStatEventTypeTCPStart,[t]),tywx.TCPClient.connectStatus!=tywx.TCPClient.CONNECT_STATUS_OPENING&&tywx.TCPClient.connectStatus!=tywx.TCPClient.CONNECT_STATUS_OK&&(tywx.TCPClient.connectStatus=tywx.TCPClient.CONNECT_STATUS_OPENING,tywx.IsWechatPlatform()&&this.doWechatConnect(t))},doWechatConnect:function(t){try{if(!tywx.IsWechatPlatform())return;wx.connectSocket({url:t}),wx.onSocketOpen(function(e){tywx.LOGD(tywx.TCPClient.TAG,"TCP webSocket opened..."),tywx.TCPClient.connectStatus=tywx.TCPClient.CONNECT_STATUS_OK,tywx.NotificationCenter.trigger(tywx.EventType.TCP_OPENED),tywx.BiLog.clickStat(tywx.clickStatEventType.clickStatEventTypeTCPSuccess,[t]),tywx.TCPClient.isTimerInited||tywx.TCPClient.startCheckTimer()}),wx.onSocketError(function(e){tywx.LOGD(tywx.TCPClient.TAG,"TCP webSocket error..."),tywx.BiLog.clickStat(tywx.clickStatEventType.clickStatEventTypeTCPFailed,[t]),tywx.TCPClient.connectStatus=tywx.TCPClient.CONNECT_STATUS_FAIL,tywx.NotificationCenter.trigger(tywx.EventType.TCP_ERROR)}),wx.onSocketClose(function(t){tywx.LOGD(tywx.TCPClient.TAG,"WebSocket \u5df2\u5173\u95ed\uff01"),tywx.TCPClient.connectStatus=tywx.TCPClient.CONNECT_STATUS_FAIL,tywx.NotificationCenter.trigger(tywx.EventType.TCP_CLOSE)}),wx.onSocketMessage(function(t){if(tywx.StateInfo.isOnForeground){var e=tywx.TCPClient.decodeMessage(t.data);if(null!=e&&"0000"!=e){var i="[Receive TCP Msg]: "+unescape(e.replace(/\\u/gi,"%u")),n=e.substr(0,e.length-0);if(null!=n&&n.length>0){var o=JSON.parse(n);-1==tywx.TCPClient.filterCmds.indexOf(o.cmd)&&tywx.LOGD(tywx.TCPClient.TAG,i),tywx.NotificationCenter.trigger(tywx.EventType.TCP_RECEIVE,o)}}}})}catch(t){tywx.LOGE("error:","tywx.TCPClient.doWechatConnect\u2014\u2014"+JSON.stringify(t))}},decodeMessage:function(t){if("undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer){for(var e=new Uint8Array(t),i="",n=0,o=e.length;n<o;n++){i+=String.fromCharCode(e[n])}return i}var s=(t=tywx.EncodeDecode.base64Decode(t)).slice(0,4);for(n=0,o=(t=t.slice(4)).length;n<o;n++){var c=t[n];c^=s[n%4],t[n]=c}return tywx.EncodeDecode.utf8Decode(t)},reconnet:function(){tywx.StateInfo.isOnForeground&&tywx.TCPClient.connectStatus==tywx.TCPClient.CONNECT_STATUS_FAIL&&(tywx.NotificationCenter.trigger(tywx.EventType.TCP_RECONNECT),tywx.TCPClient.connect(tywx.SystemInfo.webSocketUrl))},sendMsg:function(t){try{if(tywx.TCPClient.connectStatus!=tywx.TCPClient.CONNECT_STATUS_OK)return;var e=JSON.stringify(t);-1==tywx.TCPClient.filterCmds.indexOf(t.cmd)&&tywx.LOGD(tywx.TCPClient.TAG,"TCP sendMsg:"+e),tywx.IsWechatPlatform()&&wx.sendSocketMessage({data:e,success:function(t){tywx.LOGD(tywx.TCPClient.TAG,"TCP sendMsg success:"+JSON.stringify(t))},fail:function(t){var e=t[0];e&&"sendSocketMessage:fail taskID not exist"===e.errMsg&&(wx.closeSocket(),tywx.TCPClient.connectStatus=tywx.TCPClient.CONNECT_STATUS_FAIL),tywx.LOGD(tywx.TCPClient.TAG,"TCP sendMsg fail:"+JSON.stringify(arguments))},complete:function(t){}})}catch(t){tywx.LOGE("error:","tywx.TCPClient.sendMsg\u2014\u2014"+JSON.stringify(t))}},close:function(){try{tywx.TCPClient.connectStatus=tywx.TCPClient.CONNECT_STATUS_CLOSING,tywx.IsWechatPlatform()&&wx.closeSocket(),tywx.TCPClient.stopCheckTimer(),tywx.LOGD(tywx.TCPClient.TAG,"TCP close..............")}catch(t){tywx.LOGE("error:","tywx.TCPClient.close\u2014\u2014"+JSON.stringify(t))}}},cc._RF.pop()},{}],Timer:[function(t,e,i){"use strict";cc._RF.push(e,"ba784AdztZMj4ZVtOeLhBiu","Timer"),tywx.Timer={setTimer:function(t,e,i,n,o){t&&t._TAG&&tywx.LOGD("tywx.Timer","----------in setTimer----------"+(t._TAG?t._TAG:""));var s=cc.director.getScheduler();null!=n||cc.macro.REPEAT_FOREVER;s.schedule(e,t,i,n,o,!1)},cancelTimer:function(t,e){t&&t._TAG&&tywx.LOGD("tywx.Timer","----------in cancelTimer ---------"+(t._TAG?t._TAG:"")),cc.director.getScheduler().unschedule(e,t)},isScheduledTimer:function(t,e){return t&&t._TAG&&tywx.LOGD("tywx.Timer","----------in isScheduledTimer ---------"+(t._TAG?t._TAG:"")),cc.director.getScheduler().isScheduled(e,t)}},cc._RF.pop()},{}],Util:[function(t,e,i){"use strict";cc._RF.push(e,"69d96c2FRpJoIokQBtnNxHk","Util"),tywx.Util={isSceneQrCode:function(t){return[1047,1048,1049].indexOf(t)>-1},createUUID:function(){for(var t=[],e=0;e<36;e++)t[e]="0123456789abcdef".substr(Math.floor(16*Math.random()),1);return t[14]="4",t[19]="0123456789abcdef".substr(3&t[19]|8,1),t[8]=t[13]=t[18]=t[23]="",t.join("")},checkLocalUUID:function(){return""!=tywx.Util.getItemFromLocalStorage("LOCAL_UUID_KEY","")},getLocalUUID:function(){var t=tywx.Util.getItemFromLocalStorage("LOCAL_UUID_KEY","");return t||(t=tywx.Util.createUUID(),tywx.Util.setItemToLocalStorage("LOCAL_UUID_KEY",t)),t},getItemFromLocalStorage:function(t,e){try{if(wx&&wx.getStorageSync){var i=wx.getStorageSync(t);if(i)return i}else{var n=cc.sys.localStorage.getItem(t);if(n)return n}return e}catch(t){return e}},setItemToLocalStorage:function(t,e){try{wx&&wx.getStorageSync?wx.setStorage({key:t,data:e+""}):cc.sys.localStorage.setItem(t,e+"")}catch(t){tywx.LOGE("tywx.Util","setItemToLocalStorage fail")}}},cc._RF.pop()},{}],celltile:[function(t,e,i){"use strict";cc._RF.push(e,"03e43B72wFB+b7QdTdRGE6w","celltile"),cc.Class({extends:cc.Component,properties:{cells:{default:[],type:cc.Sprite}},visByNum:function(t){for(var e=0;e<this.cells.length;e++)this.cells[e].node.active=e==t-1},start:function(){}}),cc._RF.pop()},{}],gamemain:[function(t,e,i){"use strict";cc._RF.push(e,"280c3rsZJJKnZ9RqbALVwtK","gamemain");var n=t("AddOneConfig"),o=t("GeZi"),s=t("GeZiMask");cc.Class({extends:cc.Component,properties:{label:{default:null,type:cc.Label},showalertmsg:{default:null,type:cc.Label},num:{default:[],type:cc.Label},allpngs:{default:[],type:cc.Prefab},celltile:{default:null,type:cc.Prefab},stars:{default:[],type:cc.Sprite},stopView:{default:null,type:cc.Node},stopButton:{default:null,type:cc.Node},pjlView:{default:null,type:cc.Node},loseScoreLabel:{default:null,type:cc.Label},GameOver:{default:null,type:cc.Label},loseShareButtton:{default:null,type:cc.Node},pjlShareButtton:{default:null,type:cc.Node},musicBtn:{default:null,type:cc.Node},pjlScoreLabel:{default:null,type:cc.Label},effect:{default:null,type:cc.Prefab},djitem:{default:null,type:cc.Prefab},gameOut:{default:null,type:cc.Sprite},friendIcon:{default:null,type:cc.Sprite},stopViewBack:{default:null,type:cc.Sprite},bg:cc.Node,star:cc.Sprite,star1:cc.Sprite,restart:cc.Button,score:0,point:n.maxphy_value,g_mask_samecnt:0,g_clickid:-1,gamestate:"null",gamestatetime:0,maxnum:5,lianjiNumber:1,g_gezi:[],g_mask:[],allitems:[],curtimeawaypre:10,isShowFIcon:!1,recoverNumber:0,hadShowPjl:!1},onLoad:function(){this.label.string=this.score;for(var t=0;t<n.geziNumber;t++){var e=new cc.Node("node"),i=cc.instantiate(this.celltile);this.allpngs.push(i),i.parent=this.node,i.position=cc.p(0,0);var c=e.addComponent(cc.Label);c.string="",c.fontSize=64,c.lineHeight=64;var a=new cc.color(255,255,255,255);e.position=cc.p(0,0),e.color=a,e.parent=this.node,this.num.push(c);var r=new o(t,this);this.getAllgz().push(r);var l=new s(t,this);this.getAllmask().push(l)}tywx.publicwx&&(this.tex=new cc.Texture2D);var h=this;this.node.on("touchend",function(t){if(0==h.stopView.active){var e=t.touch.getLocation();h.touchEndCallback(e.x,e.y)}}),this.prerandomnumber=0,this.initgame(),this.stopViewBack.node.on("touchstart",function(t){return!0});var u=cc.instantiate(this.effect);this.node.parent.addChild(u),u.x=140,u.y=90},addRecoverNumber:function(){this.recoverNumber=this.recoverNumber+1},checkFriendsScore:function(){},showTouchEveryTime:function(){},showAlert:function(t){if(null!=t){var e=this;this.showalertmsg.node.active=!0,this.showalertmsg.string=t;var i=cc.moveBy(2,cc.p(0,260)),n=cc.callFunc(function(){e.showalertmsg.node.active=!1,e.showalertmsg.node.x=360,e.showalertmsg.node.y=739,e.showalertmsg.node.stopAllActions()}),o=cc.sequence(i,n);this.showalertmsg.node.runAction(o)}},showTouchEffect:function(t){},showStopView:function(){this.stopView.active=!this.stopView.active},dealAllItems:function(){var t=JSON.parse(ywx.Util.getItemFromLocalStorage("allitems","[]"));tywx.LOGD("\u9053\u5177\u6570\u636e = ",t)},ctor:function(){},getAllgz:function(){return this.g_gezi},getAllmask:function(){return this.g_mask},touchEndCallback:function(t,e){if(this.gamestate==n.gameState.waitclick)for(var i=0;i<n.geziNumber;i++)if(t>this.getAllgz()[i].posx&&t<this.getAllgz()[i].posx+n.gezi_size&&e>this.getAllgz()[i].posy&&e<this.getAllgz()[i].posy+n.gezi_size){var o=this.getAllgz()[i].num+1;this.getAllgz()[i].setnum(o),this.getAllgz()[i].settoblock(),this.getAllgz()[i].block.effectid=0,this.getAllgz()[i].block.effecttime=.5,o>this.maxnum&&(this.maxnum=o),this.g_clickid=i,this.gamestate=n.gameState.checkclick;this.showTouchEffect({});break}},update:function(t){if(this.label.string=this.score,this.drawPhyPoint(),this.getAllgz().length==n.geziNumber)for(var e=0;e<n.geziNumber;e++)this.getAllgz()[e].block.tickmove(t),this.getAllgz()[e].block.tickeffect(t,this.star,this.star1),this.getAllgz()[e].draw(this.bg.getComponent(cc.Graphics),this.num[e],this.allpngs[e]);switch(this.isShowFIcon&&this._updateSubDomainCanvas(),this.gamestate){case n.gameState.checkclick:this.resetAllMask();var i=this.getAllgz()[this.g_clickid].num;if(this.lianjiNumber=1,this.checkmaskbyid(this.g_clickid,0),this.g_mask_samecnt>=n.minCanRemoveNumber){this.gamestate=n.gameState.domove,this.gamestatetime=n.move_time,this.score+=n.baseScore*(this.g_mask_samecnt-1)*i;for(e=0;e<n.geziNumber;e++)999!=this.getAllmask()[e].step&&0!=this.getAllmask()[e].step&&(this.getAllgz()[e].block.speed_keep=n.gezi_pitch*this.getAllmask()[e].step/n.move_time,this.getAllgz()[e].block.actiontime_keep=n.move_time/this.getAllmask()[e].step,this.getAllgz()[e].block.id_keep=e,this.getAllgz()[e].block.id_dest=this.getAllmask()[e].from,this.getAllgz()[e].block.adjustmove())}else this.gamestate=n.gameState.waitclick,this.point--,this.point<=0&&this.gameOverCallBack(),0==this.hadShowPjl&&this.pjlCallBack();break;case n.gameState.domove:this.gamestatetime-=t,this.gamestatetime<=0&&this.dealDoMove();break;case n.gameState.dodrop:this.gamestatetime-=t,this.gamestatetime<=0&&this.dealLianJiLogic()}},dealDoMove:function(){this.star.node.active=!1,this.gamestate=n.gameState.dodrop,this.gamestatetime=n.move_time;var t=this.getAllgz()[this.g_clickid].num+1;this.getAllgz()[this.g_clickid].setnum(t),this.getAllgz()[this.g_clickid].settoblock(),this.getAllgz()[this.g_clickid].block.effectid=1,this.getAllgz()[this.g_clickid].block.effecttime=.5,t>this.maxnum&&(this.maxnum=t,this.maxScoreShow()),this.refreshbymask()},maxScoreShow:function(){tywx.LOGD("\u4ea7\u751f\u6700\u5927\u6570\u5b57",this.maxnum)},dealLianJiLogic:function(){for(var t=!1,e=0;e<n.geziNumber;e++){this.resetAllMask();var i=this.getAllgz()[e].num;if(this.checkmaskbyid(e,0),this.g_mask_samecnt>=3){this.gamestate=n.gameState.domove,this.gamestatetime=n.move_time,this.lianjiNumber++,this.score+=n.baseScore*i*(this.g_mask_samecnt-1);for(var o=0;o<25;o++)999!=this.getAllmask()[o].step&&0!=this.getAllmask()[o].step&&(this.getAllgz()[o].block.speed_keep=n.gezi_pitch*this.getAllmask()[o].step/n.move_time,this.getAllgz()[o].block.actiontime_keep=n.move_time/this.getAllmask()[o].step,this.getAllgz()[o].block.id_keep=o,this.getAllgz()[o].block.id_dest=this.getAllmask()[o].from,this.getAllgz()[o].block.adjustmove());t=!0,this.g_clickid=e,this.point<5&&this.point++;break}}0==t&&(this.gamestate=n.gameState.waitclick,this.dealLianJiNumber())},dealLianJiNumber:function(){this.lianjiNumber>n.lianjiEffects.sgood&&this.lianjiNumber<n.lianjiEffects.cgood||this.lianjiNumber>n.lianjiEffects.cgood&&this.lianjiNumber<n.lianjiEffects.hhgood||this.lianjiNumber>n.lianjiEffects.hhgood&&(this.lianjiNumber,n.lianjiEffects.maxgood),this.storeAllItem()},storeAllItem:function(){this.allitems&&tywx.Util.setItemToLocalStorage("allitems",this.allitems)},drawPhyPoint:function(){this.bg.getComponent(cc.Graphics).clear();for(var t=0;t<5;t++)this.point>=t+1?this.stars[t].node.active=!0:this.stars[t].node.active=!1},visibleControllButton:function(t){this.gameOut.node.active=t},gameOverCallBack:function(){this.gamestate=n.gameState.gameover,this.visibleControllButton(!0),this.loseScoreLabel.string=this.score},pjlCallBack:function(){this.score>tywx.Util.getItemFromLocalStorage("maxscore",0)&&(this.hadShowPjl=!0,this.visibleControllButton(!1),this.stopView.active=!0,this.pjlView.active=!0,this.pjlScoreLabel.string=this.score)},initgame:function(){this.score=0,this.point=n.maxphy_value,this.maxnum=n.maxphy_value;for(var t=0;t<n.geziNumber;t++){var e=this.getrandomnum();this.getAllgz()[t].setnum(e),this.getAllgz()[t].settoblock()}for(var i=!0;1==i;){i=!1;for(t=0;t<n.geziNumber;t++)this.resetAllMask(),this.checkmaskbyid(t,0),this.g_mask_samecnt>=3&&(this.changenumbymask(),i=!0)}this.gamestate=n.gameState.waitclick,this.visibleControllButton(!1)},resetAllMask:function(){for(var t=0;t<n.geziNumber;t++)this.getAllmask()[t].reset();this.g_mask_samecnt=1},checkmaskbyid:function(t,e){this.getAllmask()[t].step=e,this.checkDirPaths(t,e,0,-1),this.checkDirPaths(t,e,0,-5),this.checkDirPaths(t,e,4,1),this.checkDirPaths(t,e,4,5)},checkDirPaths:function(t,e,i,n){return(4!=Math.abs(n)||null==this.getAllmask()[t]||this.getAllmask()[t].y!=i)&&((1!=Math.abs(n)||null==this.getAllmask()[t]||this.getAllmask()[t].x!=i)&&(null!=this.getAllmask()[t]&&null!=this.getAllmask()[t+n]&&(!(this.getAllmask()[t+n].num!=this.getAllmask()[t].num||this.getAllmask()[t+n].step<=e)&&(999==this.getAllmask()[t+n].step&&this.g_mask_samecnt++,this.getAllmask()[t+n].step=e,this.getAllmask()[t+n].from=t,void this.checkmaskbyid(t+n,e+1,i,n)))))},changenumbymask:function(){for(var t=0;t<n.geziNumber;t++)if(999!=this.getAllmask()[t].step&&0!=this.getAllmask()[t].step){var e=this.getrandomnum();this.getAllgz()[t].setnum(e),this.getAllgz()[t].settoblock()}},getrandomnum:function(){var t=this.maxnum-2;return t<5&&(t=5),parseInt(1e4*Math.random())%t+1},recoverGame:function(){this.recoverNumber<n.maxrnum?(this.point=n.maxphy_value,this.gamestate=n.gameState.waitclick,this.addRecoverNumber(),this.visibleControllButton(!1)):(this.showAlert("\u590d\u6d3b\u6b21\u6570\u5df2\u8fbe"+n.maxrnum+"\u6b21\uff0c\u4e0d\u80fd\u7ee7\u7eed\u590d\u6d3b\u3002"),this.initgame())},refreshbymask:function(){for(var t=0;t<n.geziNumber;t++)if(999!=this.getAllmask()[t].step&&0!=this.getAllmask()[t].step){this.getAllmask()[t].from=-1;for(var e=-1,i=t+5;i<n.geziNumber;){if(999==this.getAllmask()[i].step||0==this.getAllmask()[i].step){e=i;break}i+=5}if(-1!=e){var o=this.getAllmask()[e].y-this.getAllmask()[t].y;this.getAllgz()[t].block.posx=this.getAllgz()[e].posx,this.getAllgz()[t].block.posy=this.getAllgz()[e].posy,this.getAllgz()[t].block.id_keep=e,this.getAllgz()[t].block.id_dest=t,this.getAllgz()[t].block.speed_keep=o*n.gezi_pitch/n.move_time,this.getAllgz()[t].block.adjustdrop(),this.getAllgz()[e].step=888;var s=this.getrandomnum();this.getAllgz()[t].setnum(s),this.getAllgz()[t].settoblockvalue(),this.getAllgz()[t].block.effectid=this.getAllgz()[e].block.effectid,this.getAllgz()[t].block.effecttime=this.getAllgz()[e].block.effecttime,this.getAllgz()[e].block.effectid=-1,this.getAllgz()[e].block.effecttime=0}else{o=5-this.getAllmask()[t].y;this.getAllgz()[t].block.posx=this.getAllgz()[t].posx,this.getAllgz()[t].block.posy=this.getAllgz()[t].posy+o*n.gezi_pitch,this.getAllgz()[t].block.id_keep=-1,this.getAllgz()[t].block.id_dest=t,this.getAllgz()[t].block.speed_keep=o*n.gezi_pitch/n.move_time,this.getAllgz()[t].block.adjustdrop();s=this.getrandomnum();this.getAllgz()[t].setnum(s),this.getAllgz()[t].settoblockvalue()}}},backFirstPage:function(){tywx.Util.getItemFromLocalStorage("maxscore",0)<this.score&&tywx.Util.setItemToLocalStorage("maxscore",this.score),tywx.publicwx&&wx.postMessage({method:4,score:this.score}),cc.director.loadScene("gamestart",this.destroyFinish)},backCall:function(){this.showAlert("Helloc")},showMinFriend:function(){this.isShowFIcon=!0,wx.postMessage({method:5,score:this.score})},_updateSubDomainCanvas:function(){if(this.tex&&tywx.publicwx){var t=wx.getOpenDataContext().canvas;this.tex.initWithElement(t),this.tex.handleLoadedTexture(),this.friendIcon.spriteFrame=new cc.SpriteFrame(this.tex)}},destroyFinish:function(){this.node&&this.node.destroy()}});cc._RF.pop()},{AddOneConfig:"AddOneConfig",GeZi:"GeZi",GeZiMask:"GeZiMask"}],gamestart:[function(t,e,i){"use strict";var n;cc._RF.push(e,"8ba15DE9d9OK5/fQtsc43VN","gamestart");var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function s(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}t("AddOneConfig");tywx.publicwx=!0;var c=null;cc.Class((s(n={extends:cc.Component,properties:{startButton:{default:null,type:cc.Button},backButton:{default:null,type:cc.Button},audioCtr:{default:null,type:cc.Prefab},gameScore:{default:null,type:cc.Label},historyLabel:{default:null,type:cc.Label},phb:{default:null,type:cc.Button},phbback:{default:null,type:cc.Sprite},helpback:{default:null,type:cc.Sprite},giftback:{default:null,type:cc.Sprite},method:{default:null,type:cc.Button},phbSprite:{default:null,type:cc.Sprite},shareBtn:{default:null,type:cc.Node},groupBtn:{default:null,type:cc.Node},phbView:{default:null,type:cc.Node},helpview:{default:null,type:cc.Node},giftview:{default:null,type:cc.Node},icon:cc.Sprite},_updateSubDomainCanvas:function(){},start:function(){tywx.publicwx&&(this.tex=new cc.Texture2D),this.showPhb=!1}},"_updateSubDomainCanvas",function(){if(this.tex){var t=wx.getOpenDataContext().canvas;this.tex.initWithElement(t),this.tex.handleLoadedTexture(),this.phbSprite.spriteFrame=new cc.SpriteFrame(this.tex)}}),s(n,"ctor",function(){}),s(n,"update",function(t){tywx.publicwx&&this._updateSubDomainCanvas()}),s(n,"onLoad",function(){if(tywx.publicwx){var t=tywx.ShareInterface.getRandomOnShareAppMessageInfo();t&&(tywx.ShareInterface.setOnShareAppMessageInfo(t.title,t.imageUrl,t.sharePointId,t.shareSchemeId),console.log("\u5f53\u524d\u83b7\u5f97\u7684\u5206\u4eab\u4fe1\u606f = "+JSON.stringify(t)));var e=this.shareBtn.getComponent("ShareButton");e&&(e.setErrorCall(function(t){console.log("\u5206\u4eab\u5931\u8d25\u540e\u5904\u7406\u7684\u56de\u8c03\u51fd\u6570 ",t)}),e.setSuccessCall(function(t){console.log("\u5206\u4eab\u6210\u529f\u540e\u5904\u7406\u7684\u56de\u8c03\u51fd\u6570 ",t)}));var i=this.groupBtn.getComponent("ShareButton"),n=this;i&&(i.setShareGroupCall(function(t){n.showPhb?(n.phbView.active=!1,n.showPhb=!1):(n.phbView.active=!0,n.showPhb=!0),window.wx.postMessage({method:2,MAIN_MENU_NUM:"x1",shareTicket:t.shareTickets[0]})}),i.setErrorCall(function(t){console.log("\u5206\u4eab\u5931\u8d25\u540e\u5904\u7406\u7684\u56de\u8c03\u51fd\u6570 ",t)}))}var o=tywx.Util.getItemFromLocalStorage("maxscore",0);if(null!=o){this.gameScore.string=o;var s=(o+"").length;if(s<2)this.historyLabel.node.x=this.historyLabel.node.x+50,this.gameScore.node.x=this.gameScore.node.x+50;else if(s>5){var a=25+25*(s-6);this.historyLabel.node.x=this.historyLabel.node.x-a,this.gameScore.node.x=this.gameScore.node.x-a}}else console.log("\u5f53\u524d\u5206\u6570\u4e0d\u5b58\u5728");this.phbback.node.on("touchstart",function(t){return!0}),this.helpback.node.on("touchstart",function(t){return!0}),this.giftback.node.on("touchstart",function(t){return!0}),c=this}),s(n,"showPlayMethod",function(){this.helpview.active=!this.helpview.active}),s(n,"showGiftView",function(){this.giftview.active=!this.giftview.active}),s(n,"showFriendPhbView",function(){console.log("Hellocd"),this.showPhb?(this.phbView.active=!1,this.showPhb=!1):(this.phbView.active=!0,this.showPhb=!0),tywx.publicwx&&(console.log("Hellocd"),wx.postMessage({method:1,MAIN_MENU_NUM:"x1"}))}),s(n,"hidePhbView",function(){console.log("\xe7\xe7.showPhb = "+o(c.phbView)),c.showPhb?(c.phbView.active=!1,c.showPhb=!1):(c.phbView.active=!0,c.showPhb=!0)}),s(n,"loadFinishCallBack",function(){this.node&&this.node.destroy()}),s(n,"setScore",function(t){null!=t&&(this.gameScore.string=Math.abs(t))}),s(n,"startGame",function(){cc.director.loadScene("gamemain",this.loadFinishCallBack)}),s(n,"shareApp",function(){tywx.IsWechatPlatform()&&wx.shareAppMessage({title:"\u8d76\u7d27\u52a0\u5165\u6211\u4eec\uff0c\u4e00\u8d77\u6109\u5feb\u7684\u73a9\u800d\u5427...",imageUrl:"https://gss0.bdstatic.com/7Ls0a8Sm1A5BphGlnYG/sys/portrait/item/d68bced2b5c4b7dcb6b73838383d02.jpg?20180808115403"})}),n));cc._RF.pop()},{AddOneConfig:"AddOneConfig"}],phbview:[function(t,e,i){"use strict";var n;function o(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}cc._RF.push(e,"a97d4Ia8aJOc6TjRFQN1+5q","phbview");t("AddOneConfig");tywx.publicwx=!0;cc.Class((o(n={extends:cc.Component,properties:{backButton:{default:null,type:cc.Button},phbView:{default:null,type:cc.Node},phbSprite:cc.Sprite},_updateSubDomainCanvas:function(){},start:function(){}},"_updateSubDomainCanvas",function(){if(this.tex){var t=wx.getOpenDataContext().canvas;this.tex.initWithElement(t),this.tex.handleLoadedTexture(),this.phbSprite.spriteFrame=new cc.SpriteFrame(this.tex)}}),o(n,"ctor",function(){}),o(n,"update",function(t){tywx.publicwx&&this._updateSubDomainCanvas()}),o(n,"onLoad",function(){1==tywx.curgotophbtype?tywx.publicwx&&wx.postMessage({method:1,MAIN_MENU_NUM:"x1"}):window.wx.postMessage({method:2,MAIN_MENU_NUM:"x1",shareTicket:tywx.groupdata.shareTickets[0]})}),o(n,"hidePhbView",function(){cc.director.loadScene("phbview",this.loadFinishCallBack)}),o(n,"loadFinishCallBack",function(){this.node&&this.node.destroy()}),n));cc._RF.pop()},{AddOneConfig:"AddOneConfig"}]},{},["AdManager","BiStatLog","Bilog","EncodeDecode","EventType","HttpUtil","NotificationCenter","PropagateInterface","ShareInterface","TCPClient","Timer","Util","celltile","gamemain","gamestart","AddOneConfig","Audio","DjItem","Effect","GeZi","GeZiData","GeZiMask","ShareButton","phbview"]);